:root {
  --font-family-serif: et-book, Palatino, "Palatino Linotype", "Palatino LT STD",
    "Book Antiqua", Georgia, serif;
  --font-family-sans: "FiraGO", sans-serif;
  --font-family-monospace: "Source Code Pro", "Fira Mono", monospace;

  --font-family-body: var(--font-family-serif);
  --font-family-headers: var(--font-family-serif);

  --font-size-xs: 0.8rem; /* 12.8px */
  --font-size-s: 1rem; /* 16px */
  --font-size-m: 1.25rem; /* 20px */
  --font-size-body: 1.5rem; /* 24px */
  --font-size-l: 1.75rem; /* 28px */
  --font-size-xl: 2rem; /* 32px */
  --font-size-xxl: 3rem; /* 48px */
  --font-size-xxxl: 5rem; /* 80px */

  --font-weight-headers: 300;
  --font-weight-subheaders: 700;

  --line-height-xs: 1.25; /* x14 = 16px (2/4 line) */
  --line-height-s: 1.5; /* x18 = 24px (3/4 line) */
  --line-height-m: 1.6; /* x20 = 32px (1 line)   */
  --line-height-body: 1.3333333; /* x24 = 32px (1 line) */

  --line-height-l: 1.429; /* x28 = 40px (5/4 lines) */
  --line-height-xl: 1.5; /* x32 = 48px (6/4 lines) */
  --line-height-xxl: 1.167; /* x48 = 56px (7/4 lines) */
  --line-height-xxxl: 1.2; /* x80 = 96px (3 lines) */

  --quarter-line-rem: 0.5rem;
  --half-line-rem: 1rem;
  --one-line-rem: 2rem;
  --two-line-rem: 4rem;

  --padding-l: 0.5rem;
  --padding-xl: 1rem;
  --padding-xxl: 1.5rem;
  --padding-xxxl: 2rem;
}

:root {
  /* Line height set to 32px to allow larger than 16px body font */
  --space: 2rem;
  --space-xs: 0.5rem;
  --space-s: 1rem;
  --space-m: 2rem;
  --space-l: 4rem;
  --space-xl: 8rem;
  /* Define internal spacing (padding, generally) for components */
  /* em, unlike rem, will scale to element font -- elements with larger fonts will have proportionally larger inset */
  --space-inset: 1em;
  --space-inset-xs: 0.25em;
  --space-inset-s: 0.5em;
  --space-inset-m: 1em;
  --space-inset-l: 2em;
  --space-inset-xl: 4em;
  /* Default HTML flow spacing between blocks */
  --space-stack: 0 0 2rem 0;
  --space-stack-xs: 0 0 0.5rem 0;
  --space-stack-s: 0 0 1rem 0;
  --space-stack-m: 0 0 2rem 0;
  --space-stack-l: 0 0 4rem 0;
  --space-stack-xl: 0 0 8rem 0;
  /* Vertical offset for correcting alignment */
}
/* Use space definitions to define layout spacing */
:root {
  --margin-figure: var(--space-stack-m);
  --margin-text: var(--space-stack);
  --margin-text-m: var(--space-stack-m);
  --margin-text-l: var(--space-stack-l);
  --margin-text-xl: var(--space-stack-xl);
}

body {
  font-size: var(--font-size-body);
  line-height: var(--line-height-body);
  font-family: var(--font-family-body);
  word-spacing: -0.05em;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-family-headers);
  font-weight: var(--font-weight-headers);
  text-wrap: balance;
}

.banner-title {
  font-size: var(--font-size-xxl);
  line-height: var(--line-height-xxl);
  padding-top: calc(var(--padding-xxl) / 3);
  padding-right: 1rem;
  padding-bottom: 0;
}

h1 {
  font-size: var(--font-size-xxl);
  line-height: var(--line-height-xxl);
  padding-bottom: calc(var(--padding-xxl) / 2);
  padding-top: calc(var(--padding-xxl) / 2);
}

h2 {
  font-size: var(--font-size-xl);
  line-height: var(--line-height-xl);
  margin-bottom: var(--padding-xl);
}

h3 {
  font-size: var(--font-size-l);
  line-height: var(--line-height-l);
  margin-bottom: var(--padding-l);
}

h4,
h5,
h6 {
  text-transform: uppercase;
  font-size: var(--font-size-m);
  line-height: var(--line-height-m);
  font-weight: var(--font-weight-subheaders);
}

ul:not([role]),
ol:not([role]) {
  padding-left: var(--space-inset-l);
}

small,
figcaption {
  font-size: var(--font-size-s);
  line-height: var(--line-height-s);
}

abbr {
  letter-spacing: 0.1em;
}

code,
pre {
  font-size: inherit;
  line-height: inherit;
}

/* 
* ET-BOOK bold-face results in a greater computed-area than its regular/italic/etc. faces.
*
* Adapting the height of the bold-face font using an approach adapted from https://iamvdo.me/en/blog/css-font-metrics-line-height-and-vertical-align 
*
* The font-specific constants are defined in @fonts.css; the formula below is general for any fonts with ascender height differences.
*/
.strong,
strong {
  /* compute font-size to reduce strong height by the height difference ratio */
  --computedHeightRatio: calc(
    (var(--ascender-bold) - var(--ascender-regular)) / var(--em-square)
  );
  --computedFontRatio: calc(1 - var(--computedHeightRatio));

  /* font-size: calc(var(--computedFontRatio) * var(--font-size)); */
  font-size: calc(var(--computedFontRatio) * 1em);
  font-weight: bold;
}

/* !!! 
*
* ::marker height is set to line-height*font-size, making <li> content-area line-height*marker-height (i.e. too big)
*
* 80/20 rule reset. Could calculate but don't need ::marker to match font-size height, just needs to be smaller than line-height.
* */
li::marker,
.toc-section-number,
.header-section-number {
  font-size: 0.8em;
}

sup {
  vertical-align: super;
  font-size: 0.666em;
}
.footnote-ref {
  text-decoration: none;
}
.footnote-back {
  margin-left: 0.5em;
  text-decoration: none;
}
